<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QHSE Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* EINFACHES LOGIN SYSTEM */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999999;
            font-family: 'Inter', sans-serif;
        }
        
        .login-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        .login-logo {
            width: 70px;
            height: 70px;
            background: #3b82f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 28px;
        }
        
        .login-title { 
            font-size: 24px; 
            font-weight: 700; 
            color: #1e293b; 
            margin-bottom: 30px; 
        }
        
        .login-group { 
            margin-bottom: 20px; 
            text-align: left; 
        }
        
        .login-label { 
            display: block; 
            font-weight: 600; 
            color: #374151; 
            margin-bottom: 8px; 
            font-size: 14px; 
        }
        
        .login-input { 
            width: 100%; 
            padding: 14px 16px; 
            border: 2px solid #e5e7eb; 
            border-radius: 10px; 
            font-size: 16px; 
            box-sizing: border-box; 
        }
        
        .login-input:focus { 
            outline: none; 
            border-color: #3b82f6; 
        }
        
        .login-btn { 
            width: 100%; 
            padding: 14px; 
            background: #3b82f6; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            font-size: 16px; 
            font-weight: 600; 
            cursor: pointer; 
        }
        
        .login-btn:hover { 
            background: #2563eb; 
        }
        
        .login-demo { 
            margin-top: 25px; 
            padding: 15px; 
            background: #f8fafc; 
            border-radius: 8px; 
            font-size: 13px; 
            text-align: left; 
        }
        
        .login-demo-item { 
            margin: 5px 0; 
            color: #475569; 
        }
        
        .login-msg { 
            margin-top: 15px; 
            padding: 10px; 
            border-radius: 6px; 
            font-size: 14px; 
            display: none; 
        }
        
        .login-msg.error { 
            background: #fee2e2; 
            color: #dc2626; 
        }
        
        .login-msg.success { 
            background: #dcfce7; 
            color: #16a34a; 
        }
        
        .login-msg.show { 
            display: block; 
        }
        
        /* APP VERSTECKEN/ZEIGEN */
        .app-container.hidden { 
            display: none !important; 
        }
        
        body.show-login { 
            overflow: hidden; 
        }
    </style>
</head>
<body class="show-login">
    <!-- LOGIN OVERLAY -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-card">
            <div class="login-logo"><i class="fas fa-industry"></i></div>
            <h1 class="login-title">QHSE Management System</h1>
            
            <form id="loginForm">
                <div class="login-group">
                    <label class="login-label">Firmenname</label>
                    <input type="text" id="companyField" class="login-input" placeholder="Firmenname" required>
                </div>
                <div class="login-group">
                    <label class="login-label">Passwort</label>
                    <input type="password" id="passwordField" class="login-input" placeholder="Passwort" required>
                </div>
                <button type="submit" id="loginButton" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Anmelden
                </button>
                <div id="loginMessage" class="login-msg"></div>
            </form>
            
            <div class="login-demo">
                <strong>Zugangsdaten:</strong><br>
                <div class="login-demo-item"><strong>Firma:</strong> Firma / 12345</div>
            </div>
        </div>
    </div>

    <!-- NOTIFICATION CONTAINER -->
    <div id="notificationContainer" class="notification-container"></div>
    
    <!-- MAIN APPLICATION -->
    <div class="app-container hidden">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="company-logo">
                    <i class="fas fa-industry"></i>
                    <div class="company-info">
                        <div class="company-name-container">
                            <h2 id="companyName" class="editable-company-name">Firma</h2>
                            <button class="edit-company-btn" id="editCompanyBtn">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                        <p>QHSE Management</p>
                    </div>
                </div>
                <div class="user-info">
                    <div class="user-avatar"><i class="fas fa-user"></i></div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Administrator</span>
                        <span class="user-role" id="userRole">Root Admin</span>
                        <div class="user-actions">
                            <button class="edit-profile-btn" id="editProfileBtn">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="logout-btn" onclick="doLogout()">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Menu -->
            <div class="nav-menu">
                <a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-link" data-section="arbeitsschutz">
                    <i class="fas fa-hard-hat"></i>
                    <span>Arbeitsschutz</span>
                </a>
                <a href="#" class="nav-link" data-section="qualitaet">
                    <i class="fas fa-award"></i>
                    <span>Qualit√§t</span>
                </a>
                <a href="#" class="nav-link" data-section="umwelt">
                    <i class="fas fa-leaf"></i>
                    <span>Umwelt</span>
                </a>
                <a href="#" class="nav-link" data-section="datenschutz">
                    <i class="fas fa-shield-alt"></i>
                    <span>Datenschutz</span>
                </a>
                <a href="#" class="nav-link" data-section="gesundheit">
                    <i class="fas fa-heart"></i>
                    <span>Gesundheit</span>
                </a>
                <a href="#" class="nav-link" data-section="benutzer">
                    <i class="fas fa-users"></i>
                    <span>Benutzer</span>
                </a>
                <a href="#" class="nav-link" data-section="bereiche">
                    <i class="fas fa-layer-group"></i>
                    <span>Bereiche</span>
                </a>
                <a href="#" class="nav-link" data-section="abteilungen">
                    <i class="fas fa-sitemap"></i>
                    <span>Abteilungen</span>
                </a>
                <a href="#" class="nav-link" data-section="einstellungen">
                    <i class="fas fa-cog"></i>
                    <span>Einstellungen</span>
                </a>
            </div>
        </nav>
        
        <main class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <div class="page-header">
                    <h1><i class="fas fa-tachometer-alt"></i> Dashboard</h1>
                    <p>Willkommen im QHSE Management System</p>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-file-alt"></i></div>
                        <div class="stat-content">
                            <h3>142</h3>
                            <p>Dokumente</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-content">
                            <h3>28</h3>
                            <p>Benutzer</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-tasks"></i></div>
                        <div class="stat-content">
                            <h3>15</h3>
                            <p>Aufgaben</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="stat-content">
                            <h3>98%</h3>
                            <p>Compliance</p>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-widget">
                        <h3>Aktuelle Aufgaben</h3>
                        <div class="widget-content">
                            <div class="task-item">
                                <i class="fas fa-circle text-red-500"></i>
                                <span>Sicherheitsschulung Q2 planen</span>
                            </div>
                            <div class="task-item">  
                                <i class="fas fa-circle text-yellow-500"></i>
                                <span>Umweltaudit vorbereiten</span>
                            </div>
                            <div class="task-item">
                                <i class="fas fa-circle text-green-500"></i>
                                <span>Dokumentation aktualisieren</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-widget">
                        <h3>Neueste Dokumente</h3>
                        <div class="widget-content">
                            <div class="doc-item">
                                <i class="fas fa-file-pdf"></i>
                                <span>Arbeitsschutz-Richtlinie 2024</span>
                            </div>
                            <div class="doc-item">
                                <i class="fas fa-file-word"></i>
                                <span>Qualit√§tshandbuch Update</span>
                            </div>
                            <div class="doc-item">
                                <i class="fas fa-file-excel"></i>
                                <span>Compliance Report Q1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Andere Bereiche -->
            <div id="arbeitsschutz" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-hard-hat"></i> Arbeitsschutz</h1>
                    <p>Sicherheit am Arbeitsplatz - Richtlinien und Dokumentation</p>
                </div>
                <div class="content-area">
                    <h3>Arbeitsschutz-Bereich</h3>
                    <p>Hier finden Sie alle Informationen zum Arbeitsschutz, Sicherheitsrichtlinien und Dokumentation.</p>
                </div>
            </div>
            
            <div id="qualitaet" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-award"></i> Qualit√§t</h1>
                    <p>Qualit√§tsmanagement und -sicherung</p>
                </div>
                <div class="content-area">
                    <h3>Qualit√§ts-Bereich</h3>
                    <p>Qualit√§tsmanagement, Prozessoptimierung und Zertifizierungen.</p>
                </div>
            </div>
            
            <div id="umwelt" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-leaf"></i> Umwelt</h1>
                    <p>Umweltschutz und Nachhaltigkeit</p>
                </div>
                <div class="content-area">
                    <h3>Umwelt-Bereich</h3>
                    <p>Umweltmanagement, Nachhaltigkeitsma√ünahmen und Compliance.</p>
                </div>
            </div>
            
            <div id="datenschutz" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-shield-alt"></i> Datenschutz</h1>
                    <p>DSGVO-Compliance und Datensicherheit</p>
                </div>
                <div class="content-area">
                    <h3>Datenschutz-Bereich</h3>
                    <p>DSGVO-Compliance, Datenschutzrichtlinien und Sicherheitsma√ünahmen.</p>
                </div>
            </div>
            
            <div id="gesundheit" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-heart"></i> Gesundheit</h1>
                    <p>Gesundheitsmanagement am Arbeitsplatz</p>
                </div>
                <div class="content-area">
                    <h3>Gesundheits-Bereich</h3>
                    <p>Betriebliches Gesundheitsmanagement und Pr√§ventionsma√ünahmen.</p>
                </div>
            </div>
            
            <div id="benutzer" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-users"></i> Benutzer</h1>
                    <p>Benutzerverwaltung und Rechtevergabe</p>
                </div>
                <div class="content-area">
                    <h3>Benutzer-Verwaltung</h3>
                    <p>Verwaltung von Benutzern, Rollen und Zugriffsrechten.</p>
                </div>
            </div>
            
            <div id="bereiche" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-layer-group"></i> Bereiche</h1>
                    <p>QHSE-Bereiche konfigurieren</p>
                </div>
                <div class="content-area">
                    <h3>Bereichs-Verwaltung</h3>
                    <p>Konfiguration und Verwaltung der QHSE-Bereiche.</p>
                </div>
            </div>
            
            <div id="abteilungen" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-sitemap"></i> Abteilungen</h1>
                    <p>Organisationsstruktur verwalten</p>
                </div>
                <div class="content-area">
                    <h3>Abteilungs-Verwaltung</h3>
                    <p>Verwaltung der Organisationsstruktur und Abteilungen.</p>
                </div>
            </div>
            
            <div id="einstellungen" class="content-section">
                <div class="page-header">
                    <h1><i class="fas fa-cog"></i> Einstellungen</h1>
                    <p>System-Konfiguration</p>
                </div>
                <div class="content-area">
                    <h3>System-Einstellungen</h3>
                    <p>Globale Systemkonfiguration und Anpassungen.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        console.log('üîê EINFACHES Login System startet...');
        
        // Login-Daten
        const credentials = {
            'Firma': '12345'
        };
        
        // DOM-Elemente
        const loginOverlay = document.getElementById('loginOverlay');
        const loginForm = document.getElementById('loginForm');
        const companyField = document.getElementById('companyField');
        const passwordField = document.getElementById('passwordField');
        const loginButton = document.getElementById('loginButton');
        const loginMessage = document.getElementById('loginMessage');
        const appContainer = document.querySelector('.app-container');
        
        // Nachricht anzeigen
        function showMessage(text, type = 'error') {
            loginMessage.textContent = text;
            loginMessage.className = `login-msg ${type} show`;
            console.log(`üì¢ ${type.toUpperCase()}: ${text}`);
        }
        
        // Nachricht l√∂schen
        function clearMessage() {
            loginMessage.classList.remove('show');
        }
        
        // Login verarbeiten
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('üîê Login-Versuch gestartet');
            
            const company = companyField.value.trim();
            const password = passwordField.value;
            
            console.log('üë§ Firma:', company);
            console.log('üîë Passwort eingegeben:', password ? 'Ja' : 'Nein');
            
            clearMessage();
            loginButton.disabled = true;
            
            // Validierung
            if (!company || !password) {
                showMessage('Bitte alle Felder ausf√ºllen.');
                loginButton.disabled = false;
                return;
            }
            
            // Anmeldedaten pr√ºfen
            if (credentials[company] && credentials[company] === password) {
                console.log('‚úÖ Anmeldung erfolgreich!');
                showMessage('‚úÖ Anmeldung erfolgreich! Dashboard wird geladen...', 'success');
                
                // Session speichern
                localStorage.setItem('qhse_logged_in', 'true');
                localStorage.setItem('qhse_company', company);
                
                // Nach kurzer Verz√∂gerung Dashboard zeigen
                setTimeout(function() {
                    console.log('üöÄ Zeige Dashboard...');
                    showDashboard();
                }, 1500);
                
            } else {
                console.log('‚ùå Ung√ºltige Anmeldedaten');
                showMessage('Ung√ºltige Anmeldedaten. Bitte versuchen Sie es erneut.');
                loginButton.disabled = false;
            }
        });
        
        // Dashboard anzeigen
        function showDashboard() {
            console.log('üìä Dashboard wird angezeigt...');
            
            // Login verstecken
            loginOverlay.style.display = 'none';
            
            // App zeigen
            appContainer.classList.remove('hidden');
            document.body.classList.remove('show-login');
            
            // Navigation einrichten
            setupNavigation();
            
            // Erfolgs-Benachrichtigung
            showSuccessNotification();
            
            console.log('‚úÖ Dashboard erfolgreich geladen!');
        }
        
        // Navigation einrichten
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetSection = this.dataset.section;
                    console.log('üìç Navigation zu:', targetSection);
                    
                    // Aktive Navigation aktualisieren
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Inhalte umschalten
                    contentSections.forEach(s => s.classList.remove('active'));
                    const target = document.getElementById(targetSection);
                    if (target) {
                        target.classList.add('active');
                    }
                });
            });
        }
        
        // Erfolgs-Benachrichtigung
        function showSuccessNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 1000000;
                background: #10b981; color: white; padding: 15px 20px;
                border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                font-family: Inter, sans-serif; font-weight: 600;
                animation: slideIn 0.3s ease-out;
            `;
            notification.innerHTML = 'üéâ Willkommen! Dashboard erfolgreich geladen.';
            
            document.body.appendChild(notification);
            
            // Automatisch nach 4 Sekunden entfernen
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // Logout
        window.doLogout = function() {
            if (confirm('Wirklich abmelden?')) {
                console.log('üëã Logout');
                localStorage.removeItem('qhse_logged_in');
                localStorage.removeItem('qhse_company');
                location.reload();
            }
        };
        
        // Session pr√ºfen beim Start
        function checkSession() {
            const loggedIn = localStorage.getItem('qhse_logged_in');
            const company = localStorage.getItem('qhse_company');
            
            if (loggedIn === 'true' && company) {
                console.log('üîÑ Bestehende Session gefunden:', company);
                showDashboard();
                return true;
            }
            
            return false;
        }
        
        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üèÅ System wird initialisiert...');
            
            if (!checkSession()) {
                console.log('üîê Zeige Login-Screen');
                // Login ist bereits sichtbar
            }
            
            console.log('‚úÖ System bereit');
        });
        
        // CSS Animation hinzuf√ºgen
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        console.log('üîê Einfaches Login System vollst√§ndig geladen');
    </script>
</body>
</html>